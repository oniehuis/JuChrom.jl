<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Utilities · JuChrom.jl</title><meta name="title" content="Utilities · JuChrom.jl"/><meta property="og:title" content="Utilities · JuChrom.jl"/><meta property="twitter:title" content="Utilities · JuChrom.jl"/><meta name="description" content="Documentation for JuChrom.jl."/><meta property="og:description" content="Documentation for JuChrom.jl."/><meta property="twitter:description" content="Documentation for JuChrom.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="JuChrom.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuChrom.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Core containers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../man/containers/">Design overview</a></li><li><a class="tocitem" href="../../man/scans/">Scans</a></li><li><a class="tocitem" href="../../man/scanseries/">Scan series</a></li><li><a class="tocitem" href="../../man/scanmatrices/">Scan matrices</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Loaders</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../man/loaderapi/">Loader API</a></li><li><a class="tocitem" href="../../man/agilentfid/">Agilent FID</a></li><li><a class="tocitem" href="../../man/chemstationms/">Agilent ChemStation MS</a></li><li><a class="tocitem" href="../../man/masshunterms/">Agilent MassHunter MS</a></li><li><a class="tocitem" href="../../man/shimadzums/">Shimadzu MS</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Data processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../man/alignment/">Alignment</a></li><li><a class="tocitem" href="../../man/baseline/">Baseline</a></li><li><input class="collapse-toggle" id="menuitem-2-3-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3-3"><span class="docs-label">Binning and Gridding</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../man/mz_binning/">m/z binning</a></li><li><a class="tocitem" href="../../man/binning_gridding/">Retention binning and gridding</a></li></ul></li><li><a class="tocitem" href="../../man/deconvolution/">Deconvolution</a></li><li><a class="tocitem" href="../../man/convert/">Format conversion</a></li><li><input class="collapse-toggle" id="menuitem-2-3-6" type="checkbox"/><label class="tocitem" for="menuitem-2-3-6"><span class="docs-label">Retention mapping</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../man/mapping_overview/">Overview</a></li><li><a class="tocitem" href="../../man/mapping_tools/">Mapping tools</a></li></ul></li><li><a class="tocitem" href="../../man/scan_timing/">Scan timing</a></li><li><a class="tocitem" href="../../man/transformation/">Transformation</a></li><li><a class="tocitem" href="../../man/transform/">Trimming and Filtering</a></li><li><a class="tocitem" href="../../man/quadvar_model/">Variance modeling</a></li></ul></li></ul></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../deconvolution/">Deconvolution</a></li><li><a class="tocitem" href="../transform/">Transform</a></li><li class="is-active"><a class="tocitem" href>Utilities</a></li></ul></li><li><a class="tocitem" href="../../man/register/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Internals</a></li><li class="is-active"><a href>Utilities</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Utilities</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/oniehuis/JuChrom.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/oniehuis/JuChrom.jl/blob/main/docs/src/internals/utils.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Utilities"><a class="docs-heading-anchor" href="#Utilities">Utilities</a><a id="Utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="JuChrom.consistentunits"><a class="docstring-binding" href="#JuChrom.consistentunits"><code>JuChrom.consistentunits</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">consistentunits(vals::AbstractArray{&lt;:Union{Real, AbstractQuantity{&lt;:Real}}}) -&gt; Bool</code></pre><p>Check whether all elements in <code>vals</code> have consistent Unitful units.</p><p>This function determines if an array contains only plain numbers, or only quantities with  the same unit. Mixed arrays of numbers and quantities, or arrays of quantities with  differing units, are considered inconsistent.</p><p><strong>Arguments</strong></p><ul><li><code>vals</code>: An array of values, which may be <code>Unitful.AbstractQuantity</code> or plain numbers.</li></ul><p><strong>Return</strong></p><ul><li><code>Bool</code>: <code>true</code> if<ul><li><code>vals</code> is empty (trivially consistent),</li><li>all elements are plain numbers (no units), or</li><li>all elements are quantities with the <strong>same</strong> unit.</li></ul>Returns <code>false</code> if<ul><li>there is a mixture of quantities and plain numbers, or</li><li>quantities have different units.</li></ul></li></ul><p>See also: <a href="#JuChrom.strip_units_checked"><code>strip_units_checked</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.consistentunits(Int64[])
true

julia&gt; JuChrom.consistentunits([1.0, 2.0, 3.0])
true

julia&gt; JuChrom.consistentunits([1, 2, 3]u&quot;s&quot;)
true

julia&gt; ret = [1u&quot;s&quot;, 2u&quot;minute&quot;, 3u&quot;s&quot;];

julia&gt; ret ≈ [1, 120, 3]u&quot;s&quot;
true

julia&gt; JuChrom.consistentunits(ret)
true

julia&gt; JuChrom.consistentunits([1u&quot;m&quot;, 2.0u&quot;minute&quot;, 3.0u&quot;kg&quot;])
false

julia&gt; JuChrom.consistentunits([1u&quot;s&quot;, 2.0, 3.0])
false</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/units.jl#L3-L51">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.copy_with"><a class="docstring-binding" href="#JuChrom.copy_with"><code>JuChrom.copy_with</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">copy_with(obj, overrides::NamedTuple) -&gt; typeof(obj)</code></pre><p>Create a deep copy of <code>obj</code>, replacing specified fields with new values.</p><p>This function returns a new object of the same type as <code>obj</code>, with selected fields  replaced by values provided in the <code>overrides</code> named tuple. All other fields are  deep-copied from the original object. The function assumes that all overridden values  are type-compatible with the corresponding fields.</p><p>This function does <strong>not</strong> infer new field types and expects all overrides to match the  original field types.</p><p><strong>Arguments</strong></p><ul><li><code>obj</code>: The original object to copy.</li><li><code>overrides</code>: A <code>NamedTuple</code> of field-value pairs to override in <code>obj</code>.</li></ul><p><strong>Return</strong></p><ul><li>A new object of the same type as <code>obj</code>, with specified fields updated.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; struct MyStruct
         x::Int
         y::String
       end

julia&gt; obj = MyStruct(1, &quot;a&quot;)
MyStruct(1, &quot;a&quot;)

julia&gt; JuChrom.copy_with(obj, (y = &quot;b&quot;,))
MyStruct(1, &quot;b&quot;)

julia&gt; JuChrom.copy_with(obj, (x = 42, y = &quot;hello&quot;,))
MyStruct(42, &quot;hello&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/collections.jl#L3-L39">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.findclosest"><a class="docstring-binding" href="#JuChrom.findclosest"><code>JuChrom.findclosest</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">findclosest(A::AbstractVector{&lt;:Number}, x::Number) -&gt; Int</code></pre><p>Return the index of the number closest to <code>x</code> in a vector <code>A</code> of numbers sorted in ascending  order. If case of a tie, the index of the larger number is returned.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.findclosest([-2, -1, 0, 1, 2, 3, 4, 5], 0)
3

julia&gt; JuChrom.findclosest([-2, -1, 0, 1, 2, 3, 4, 5], 1.5)
5

julia&gt; JuChrom.findclosest([-2, -1, 0, 1, 2, 3, 4, 5], -1.5)
2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/collections.jl#L60-L77">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.inverse"><a class="docstring-binding" href="#JuChrom.inverse"><code>JuChrom.inverse</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">inverse(u::Unitful.Units) -&gt; Unitful.Units</code></pre><p>Return the reciprocal (multiplicative inverse) of the given unit.</p><p>This function computes the inverse of a unit, returning a new unit representing <code>1/u</code>.  This is useful for expressing rates or reciprocals of physical quantities (e.g. from  meters to 1/meter).</p><p><strong>Arguments</strong></p><ul><li><code>u</code>: A unit from <code>Unitful</code>.</li></ul><p><strong>Return</strong></p><ul><li><code>Unitful.Units</code>: The inverse unit, such as <code>1/u</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.inverse(u&quot;m&quot;)
m^-1
julia&gt; JuChrom.inverse(u&quot;kg&quot;)
kg^-1
julia&gt; JuChrom.inverse(u&quot;s&quot;)
s^-1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/units.jl#L67-L91">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.inverse_minmax_scale"><a class="docstring-binding" href="#JuChrom.inverse_minmax_scale"><code>JuChrom.inverse_minmax_scale</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">inverse_minmax_scale(v_norm::Real, v_min::Real, v_max::Real) -&gt; Real</code></pre><p>Convert a min-max normalized value back to its original scale.</p><p>This function performs the inverse of min-max normalization, mapping a normalized value <code>v_norm ∈ [0, 1]</code> back to its original scale using the provided minimum (<code>v_min</code>) and maximum (<code>v_max</code>) values.</p><p><strong>Arguments</strong></p><ul><li><code>v_norm</code>: The normalized value (typically in the range [0, 1]).</li><li><code>v_min</code>: The minimum value of the original scale.</li><li><code>v_max</code>: The maximum value of the original scale.</li></ul><p><strong>Return</strong></p><ul><li>The corresponding value on the original scale as a <code>Real</code>.</li></ul><p>See also: <a href="#JuChrom.minmax_scale"><code>minmax_scale</code></a></p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.inverse_minmax_scale(0.5, 10, 20)
15.0
julia&gt; JuChrom.inverse_minmax_scale(0.0, 5, 15)
5.0
julia&gt; JuChrom.inverse_minmax_scale(1.0, 5, 15)
15.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/math.jl#L102-L130">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.isunitful"><a class="docstring-binding" href="#JuChrom.isunitful"><code>JuChrom.isunitful</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">isunitful(x) -&gt; Bool</code></pre><p>Return <code>true</code> if <code>x</code> is a <code>Unitful.AbstractQuantity</code>, regardless of whether it carries nontrivial units. This is a light-weight check used to branch between unitful and unitless code paths; values with <code>Unitful.NoUnits</code> still return <code>true</code> because they are wrapped quantities.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Any value that may or may not be a Unitful quantity.</li></ul><p><strong>Return</strong></p><ul><li><code>Bool</code>: <code>true</code> for Unitful quantities, <code>false</code> otherwise.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.isunitful(1.0u&quot;s&quot;)
true

julia&gt; JuChrom.isunitful(2.0)
false

julia&gt; JuChrom.isunitful(ustrip(1.0u&quot;s&quot;))
false</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/units.jl#L96-L121">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.localmaxima"><a class="docstring-binding" href="#JuChrom.localmaxima"><code>JuChrom.localmaxima</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">localmaxima(values::AbstractVector{&lt;:Real}) -&gt; Vector{Int}</code></pre><p>Return the indices of local maxima in a vector or 1D array of real numbers.</p><p>A local maximum is defined as an element that is strictly greater than its immediate  neighbors. Only strictly greater maxima are detected; plateaus or flat maxima are not  identified.</p><p><strong>Arguments</strong></p><ul><li><code>values</code>: A one-dimensional vector or array of real numbers.</li></ul><p><strong>Return</strong></p><ul><li>A vector of integer indices corresponding to positions in <code>values</code> where local maxima  occur.</li></ul><p><strong>Notes</strong></p><ul><li>At least three elements are required in <code>values</code> to detect maxima.</li><li>Works with arrays having arbitrary indexing (e.g., <code>OffsetArrays</code>).</li><li>Only strictly greater maxima are detected; flat or plateau maxima are ignored.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; vals = [1, 3, 2, 4, 5, 1];

julia&gt; JuChrom.localmaxima(vals) == [2, 5]
true

julia&gt; JuChrom.localmaxima([1, 2, 3]) == []
true

julia&gt; JuChrom.localmaxima([1, 5, 1]) == [2]
true

julia&gt; JuChrom.localmaxima([1, 2, 2, 1]) == []
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/math.jl#L137-L174">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.maxdecimals"><a class="docstring-binding" href="#JuChrom.maxdecimals"><code>JuChrom.maxdecimals</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">maxdecimals(vec::AbstractVector{&lt;:Real}) -&gt; Int</code></pre><p>Return the maximum number of decimal places present in any element of the input vector.</p><p>This function examines each element of <code>vec</code>, converts it to a string, and counts the  number of digits after the decimal point (ignoring trailing zeros). It returns the largest  such count found among all elements. If the vector is empty or contains only integers,  returns <code>0</code>.</p><p><strong>Arguments</strong></p><ul><li><code>vec</code>: A vector of real numbers to analyze.</li></ul><p><strong>Return</strong></p><ul><li><code>Int</code>: The maximum number of decimal digits present in any element of <code>vec</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.maxdecimals([1.23, 4.567, 8.9])
3
julia&gt; JuChrom.maxdecimals([1.0, 2.0, 3.0])
0
julia&gt; JuChrom.maxdecimals(Int[])
0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/math.jl#L188-L213">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.minmax_scale"><a class="docstring-binding" href="#JuChrom.minmax_scale"><code>JuChrom.minmax_scale</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">minmax_scale(v::Real, v_min::Real, v_max::Real) -&gt; Real</code></pre><p>Scale a value to the [0, 1] range using min-max normalization.</p><p>This function applies min-max normalization to a scalar value <code>v</code>, mapping it to the  range [0, 1] based on the provided minimum (<code>v_min</code>) and maximum (<code>v_max</code>) values of the  original scale.</p><p><strong>Arguments</strong></p><ul><li><code>v</code>: The value to normalize.</li><li><code>v_min</code>: The minimum value of the original scale.</li><li><code>v_max</code>: The maximum value of the original scale.</li></ul><p><strong>Return</strong></p><ul><li>The normalized value in the range [0, 1] as a <code>Real</code>.</li></ul><p>See also: <a href="#JuChrom.inverse_minmax_scale"><code>inverse_minmax_scale</code></a></p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.minmax_scale(15, 10, 20)
0.5
julia&gt; JuChrom.minmax_scale(5, 5, 15)
0.0
julia&gt; JuChrom.minmax_scale(15, 5, 15)
1.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/math.jl#L233-L261">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.strip_units_checked"><a class="docstring-binding" href="#JuChrom.strip_units_checked"><code>JuChrom.strip_units_checked</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">strip_units_checked(arr::AbstractArray, name::String) -&gt; Tuple{AbstractArray, Union{Unitful.Units, Nothing}}</code></pre><p>Strip units from an array, returning both the unitless values and the associated unit.</p><p>This function checks that all elements of <code>arr</code> have consistent units (if any), strips the  units if present, and returns a tuple <code>(values, unit)</code>. If the array is empty, it returns  the array and <code>nothing</code>. If the array contains quantities with inconsistent units, an  <code>ArgumentError</code> is thrown. If the array contains only numbers (no units), the original  array and <code>nothing</code> are returned.</p><p><strong>Arguments</strong></p><ul><li><code>arr</code>: An array of numbers or <code>Unitful.AbstractQuantity</code> values.</li><li><code>name</code>: A string used for error messages to identify the data source.</li></ul><p><strong>Return</strong></p><ul><li>A tuple <code>(values, unit)</code>, where <code>values</code> is an array of numbers (units stripped if  present), and <code>unit</code> is the associated <code>Unitful.Units</code> object or <code>nothing</code> if not  applicable.</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code> if the array contains quantities with inconsistent units.</li></ul><p>See also: <a href="#JuChrom.consistentunits"><code>consistentunits</code></a></p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; JuChrom.strip_units_checked([1, 2]u&quot;s&quot;, &quot;times&quot;)
([1, 2], s)

julia&gt; JuChrom.strip_units_checked([1.0, 2.0], &quot;values&quot;)
([1.0, 2.0], nothing)

julia&gt; JuChrom.strip_units_checked([], &quot;empty&quot;)
(Any[], nothing)

julia&gt; JuChrom.strip_units_checked([1u&quot;s&quot;, 2u&quot;m&quot;], &quot;mixed&quot;)
ERROR: ArgumentError: Inconsistent units in mixed.
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/units.jl#L126-L166">source</a></section></details></article><article><details class="docstring" open="true"><summary id="JuChrom.typify"><a class="docstring-binding" href="#JuChrom.typify"><code>JuChrom.typify</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">typify(collection) -&gt; new_collection</code></pre><p>Promotes and converts the elements of a dictionary or vector to a common type.</p><p>For a dictionary, <code>typify(dict::Dict)</code> inspects the types of the values, computes their common promoted type <code>T</code> using <code>promote_type</code>, and returns a new <code>Dict{K, T}</code> with each value converted via <code>convert(T, v)</code>.</p><p>For a vector, <code>typify(vec::AbstractVector)</code> promotes the element types to a common type <code>T</code> and returns a <code>Vector{T}</code> with all elements converted.</p><p>If the promoted type <code>T</code> is not concrete (e.g., a union or abstract type), a warning is emitted, as this may lead to type instability.</p><p><strong>Arguments</strong></p><ul><li><code>dict::Dict</code>: A dictionary with arbitrary value types.</li><li><code>vec::AbstractVector</code>: A vector with potentially mixed element types.</li></ul><p><strong>Returns</strong></p><ul><li>A new container of the same kind (<code>Dict</code> or <code>Vector</code>) with unified and converted element  types. If promotion yields <code>Any</code> or another abstract type, conversion is effectively  identity.</li></ul><p><strong>Throws</strong></p><ul><li>Errors when the promoted type is concrete and cannot accept a value. This may be a <code>MethodError</code> (no conversion) or <code>InexactError</code> (inexact conversion).</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; d = Dict(&quot;a&quot; =&gt; 1, &quot;b&quot; =&gt; 2.5)
Dict{String, Real} with 2 entries:
  &quot;b&quot; =&gt; 2.5
  &quot;a&quot; =&gt; 1

julia&gt; typify(d)
Dict{String, Float64} with 2 entries:
  &quot;b&quot; =&gt; 2.5
  &quot;a&quot; =&gt; 1.0

julia&gt; v = Real[1, 2.5, 3]
3-element Vector{Real}:
 1
 2.5
 3

julia&gt; typify(v)
3-element Vector{Float64}:
 1.0
 2.5
 3.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/oniehuis/JuChrom.jl/blob/713ef5253b54b9d5e1e2b12cc567fa43a557d8a4/src/core/utils/collections.jl#L92-L144">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../transform/">« Transform</a><a class="docs-footer-nextpage" href="../../man/register/">Index »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Saturday 24 January 2026 20:47">Saturday 24 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
